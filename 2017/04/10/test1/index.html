<!DOCTYPE html>
<html lang="zh-CN">
<head>

    <!--[if lt IE 9]>
        <style>body {display: none; background: none !important} </style>
        <meta http-equiv="Refresh" Content="0; url=//outdatedbrowser.com/" />
    <![endif]-->

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="format-detection" content="telephone=no" />
<meta name="author" content="alingfeng" />



<meta name="description" content="这是博客测试test1ECMAScript 6.0（以下简称 ES6）是 JavaScript 语言的下一代标准，已经在2015年6月正式发布了。它的目标，是使得 JavaScript 语言可以用来编写复杂的大型应用程序，成为企业级开发语言。 ECMAScript 和 JavaScript 的关系一个常见的问题是，ECMAScript 和 JavaScript 到底是什么关系？ 要讲清楚这个问题，">
<meta name="keywords">
<meta property="og:type" content="article">
<meta property="og:title" content="hello-world   //在此处添加你的标题。">
<meta property="og:url" content="http://yoursite.com/2017/04/10/test1/index.html">
<meta property="og:site_name" content="alingfeng">
<meta property="og:description" content="这是博客测试test1ECMAScript 6.0（以下简称 ES6）是 JavaScript 语言的下一代标准，已经在2015年6月正式发布了。它的目标，是使得 JavaScript 语言可以用来编写复杂的大型应用程序，成为企业级开发语言。 ECMAScript 和 JavaScript 的关系一个常见的问题是，ECMAScript 和 JavaScript 到底是什么关系？ 要讲清楚这个问题，">
<meta property="og:updated_time" content="2017-04-10T14:49:06.523Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="hello-world   //在此处添加你的标题。">
<meta name="twitter:description" content="这是博客测试test1ECMAScript 6.0（以下简称 ES6）是 JavaScript 语言的下一代标准，已经在2015年6月正式发布了。它的目标，是使得 JavaScript 语言可以用来编写复杂的大型应用程序，成为企业级开发语言。 ECMAScript 和 JavaScript 的关系一个常见的问题是，ECMAScript 和 JavaScript 到底是什么关系？ 要讲清楚这个问题，">

<link rel="apple-touch-icon" href= "/apple-touch-icon.png">


    <link rel="alternate" href="/atom.xml" title="alingfeng" type="application/atom+xml">



    <link rel="shortcut icon" href="/favicon.png">



    <link href="//cdn.bootcss.com/animate.css/3.5.1/animate.min.css" rel="stylesheet">



    <link href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet">



    <script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
    <link href="//cdn.bootcss.com/pace/1.0.2/themes/blue/pace-theme-minimal.css" rel="stylesheet">


<link rel="stylesheet" href="/css/style.css">



<link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">


<title>hello-world   //在此处添加你的标题。 | alingfeng</title>

<script src="//cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>
<script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script>

<script>
    var yiliaConfig = {
        fancybox: true,
        animate: true,
        isHome: false,
        isPost: true,
        isArchive: false,
        isTag: false,
        isCategory: false,
        fancybox_js: "//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js",
        scrollreveal: "//cdn.bootcss.com/scrollReveal.js/3.1.4/scrollreveal.min.js",
        search: undefined
    }
</script>


    <script> yiliaConfig.jquery_ui = [false]; </script>



    <script> yiliaConfig.rootUrl = "\/";</script>






</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic">
            <img src="/img/avatar.png" class="animated zoomIn">
        </a>
        <hgroup>
          <h1 class="header-author"><a href="/">alingfeng</a></h1>
        </hgroup>

        
        <p class="header-subtitle">100次的听说不如一次的亲身经历，人和人最大的不同在于经历和阅历不同，普通人面对经历无动于衷，没有成长。没有批评，而高手面对经历拼命地吸收和消化，一转身就能立刻找到。</p>
        

        


        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        <div class="icon-wrap icon-link hide" data-idx="2">
                            <div class="loopback_l"></div>
                            <div class="loopback_r"></div>
                        </div>
                        
                        
                        <div class="icon-wrap icon-me hide" data-idx="3">
                            <div class="user"></div>
                            <div class="shoulder"></div>
                        </div>
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>菜单</li>
                        <li>标签</li>
                        
                        <li>友情链接</li>
                        
                        
                        <li>关于我</li>
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/">主页</a></li>
                        
                            <li><a href="/archives/">所有文章</a></li>
                        
                            <li><a href="/tags/">标签云</a></li>
                        
                            <li><a href="/about/">关于我</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" href="mailto:123@123.com" title="Email"></a>
                            
                                <a class="fa GitHub" href="#" title="GitHub"></a>
                            
                                <a class="fa RSS" href="/atom.xml" title="RSS"></a>
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        
                    </div>
                </section>
                
                
                
                <section class="switch-part switch-part3">
                    <div id="js-friends">
                    
                      <a class="main-nav-link switch-friends-link" href="https://hexo.io">Hexo</a>
                    
                      <a class="main-nav-link switch-friends-link" href="https://pages.github.com/">GitHub</a>
                    
                      <a class="main-nav-link switch-friends-link" href="http://moxfive.xyz/">MOxFIVE</a>
                    
                    </div>
                </section>
                

                
                
                <section class="switch-part switch-part4">
                
                    <div id="js-aboutme">专注于前端</div>
                </section>
                
            </div>
        </div>
    </header>                
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="回到主页">alingfeng</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                <img src="/img/avatar.png" class="animated zoomIn">
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="回到主页">alingfeng</a></h1>
            </hgroup>
            
            <p class="header-subtitle">100次的听说不如一次的亲身经历，人和人最大的不同在于经历和阅历不同，普通人面对经历无动于衷，没有成长。没有批评，而高手面对经历拼命地吸收和消化，一转身就能立刻找到。</p>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/">主页</a></li>
                
                    <li><a href="/archives/">所有文章</a></li>
                
                    <li><a href="/tags/">标签云</a></li>
                
                    <li><a href="/about/">关于我</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" target="_blank" href="mailto:123@123.com" title="Email"></a>
                            
                                <a class="fa GitHub" target="_blank" href="#" title="GitHub"></a>
                            
                                <a class="fa RSS" target="_blank" href="/atom.xml" title="RSS"></a>
                            
                        </ul>
            </nav>
        </header>                
    </div>
    <link class="menu-list" tags="标签" friends="友情链接" about="关于我"/>
</nav>
      <div class="body-wrap"><article id="post-test1" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/04/10/test1/" class="article-date">
      <time datetime="2017-04-10T14:49:22.616Z" itemprop="datePublished">2017-04-10</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      hello-world   //在此处添加你的标题。
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/Exercise-在此处输入这篇文章的分类。/">Exercise   //在此处输入这篇文章的分类。</a>
    </div>


        
        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>这是博客测试test1<br>ECMAScript 6.0（以下简称 ES6）是 JavaScript 语言的下一代标准，已经在2015年6月正式发布了。它的目标，是使得 JavaScript 语言可以用来编写复杂的大型应用程序，成为企业级开发语言。</p>
<p>ECMAScript 和 JavaScript 的关系<br>一个常见的问题是，ECMAScript 和 JavaScript 到底是什么关系？</p>
<p>要讲清楚这个问题，需要回顾历史。1996年11月，JavaScript 的创造者 Netscape 公司，决定将 JavaScript 提交给国际标准化组织ECMA，希望这种语言能够成为国际标准。次年，ECMA 发布262号标准文件（ECMA-262）的第一版，规定了浏览器脚本语言的标准，并将这种语言称为 ECMAScript，这个版本就是1.0版。</p>
<p>该标准从一开始就是针对 JavaScript 语言制定的，但是之所以不叫 JavaScript，有两个原因。一是商标，Java 是 Sun 公司的商标，根据授权协议，只有 Netscape 公司可以合法地使用 JavaScript 这个名字，且 JavaScript 本身也已经被 Netscape 公司注册为商标。二是想体现这门语言的制定者是 ECMA，不是 Netscape，这样有利于保证这门语言的开放性和中立性。</p>
<p>因此，ECMAScript 和 JavaScript 的关系是，前者是后者的规格，后者是前者的一种实现（另外的 ECMAScript 方言还有 Jscript 和 ActionScript）。日常场合，这两个词是可以互换的。</p>
<p>ES6 与 ECMAScript 2015 的关系<br>ECMAScript 2015（简称 ES2015）这个词，也是经常可以看到的。它与 ES6 是什么关系呢？</p>
<p>2011年，ECMAScript 5.1版发布后，就开始制定6.0版了。因此，ES6 这个词的原意，就是指 JavaScript 语言的下一个版本。</p>
<p>但是，因为这个版本引入的语法功能太多，而且制定过程当中，还有很多组织和个人不断提交新功能。事情很快就变得清楚了，不可能在一个版本里面包括所有将要引入的功能。常规的做法是先发布6.0版，过一段时间再发6.1版，然后是6.2版、6.3版等等。</p>
<p>但是，标准的制定者不想这样做。他们想让标准的升级成为常规流程：任何人在任何时候，都可以向标准委员会提交新语法的提案，然后标准委员会每个月开一次会，评估这些提案是否可以接受，需要哪些改进。如果经过多次会议以后，一个提案足够成熟了，就可以正式进入标准了。这就是说，标准的版本升级成为了一个不断滚动的流程，每个月都会有变动。</p>
<p>标准委员会最终决定，标准在每年的6月份正式发布一次，作为当年的正式版本。接下来的时间，就在这个版本的基础上做改动，直到下一年的6月份，草案就自然变成了新一年的版本。这样一来，就不需要以前的版本号了，只要用年份标记就可以了。</p>
<p>ES6 的第一个版本，就这样在2015年6月发布了，正式名称就是《ECMAScript 2015标准》（简称 ES2015）。2016年6月，小幅修订的《ECMAScript 2016标准》（简称 ES2016）如期发布，这个版本可以看作是 ES6.1 版，因为两者的差异非常小（只新增了数组实例的includes方法和指数运算符），基本上是同一个标准。根据计划，2017年6月发布 ES2017 标准。</p>
<p>因此，ES6 既是一个历史名词，也是一个泛指，含义是5.1版以后的 JavaScript 的下一代标准，涵盖了ES2015、ES2016、ES2017等等，而ES2015 则是正式名称，特指该年发布的正式版本的语言标准。本书中提到 ES6 的地方，一般是指 ES2015 标准，但有时也是泛指“下一代 JavaScript 语言”。</p>
<p>语法提案的批准流程<br>任何人都可以向标准委员会（又称 TC39 委员会）提案，要求修改语言标准。</p>
<p>一种新的语法从提案到变成正式标准，需要经历五个阶段。每个阶段的变动都需要由 TC39 委员会批准。</p>
<p>Stage 0 - Strawman（展示阶段）<br>Stage 1 - Proposal（征求意见阶段）<br>Stage 2 - Draft（草案阶段）<br>Stage 3 - Candidate（候选人阶段）<br>Stage 4 - Finished（定案阶段）<br>一个提案只要能进入 Stage 2，就差不多肯定会包括在以后的正式标准里面。ECMAScript 当前的所有提案，可以在 TC39 的官方网站Github.com/tc39/ecma262查看。</p>
<p>本书的写作目标之一，是跟踪 ECMAScript 语言的最新进展，介绍5.1版本以后所有的新语法。对于那些明确或很有希望，将要列入标准的新语法，都将予以介绍。</p>
<p>ECMAScript 的历史<br>ES6 从开始制定到最后发布，整整用了15年。</p>
<p>前面提到，ECMAScript 1.0 是1997年发布的，接下来的两年，连续发布了 ECMAScript 2.0（1998年6月）和 ECMAScript 3.0（1999年12月）。3.0版是一个巨大的成功，在业界得到广泛支持，成为通行标准，奠定了 JavaScript 语言的基本语法，以后的版本完全继承。直到今天，初学者一开始学习 JavaScript，其实就是在学3.0版的语法。</p>
<p>2000年，ECMAScript 4.0 开始酝酿。这个版本最后没有通过，但是它的大部分内容被 ES6 继承了。因此，ES6 制定的起点其实是2000年。</p>
<p>为什么 ES4 没有通过呢？因为这个版本太激进了，对 ES3 做了彻底升级，导致标准委员会的一些成员不愿意接受。ECMA 的第39号技术专家委员会（Technical Committee 39，简称TC39）负责制订 ECMAScript 标准，成员包括 Microsoft、Mozilla、Google 等大公司。</p>
<p>2007年10月，ECMAScript 4.0 版草案发布，本来预计次年8月发布正式版本。但是，各方对于是否通过这个标准，发生了严重分歧。以 Yahoo、Microsoft、Google 为首的大公司，反对 JavaScript 的大幅升级，主张小幅改动；以 JavaScript 创造者Brendan Eich为首的Mozilla公司，则坚持当前的草案。</p>
<p>2008年7月，由于对于下一个版本应该包括哪些功能，各方分歧太大，争论过于激烈，ECMA 开会决定，中止 ECMAScript 4.0 的开发，将其中涉及现有功能改善的一小部分，发布为 ECMAScript 3.1，而将其他激进的设想扩大范围，放入以后的版本，由于会议的气氛，该版本的项目代号起名为 Harmony（和谐）。会后不久，ECMAScript 3.1 就改名为 ECMAScript 5。</p>
<p>2009年12月，ECMAScript 5.0 版正式发布。Harmony 项目则一分为二，一些较为可行的设想定名为 JavaScript.next 继续开发，后来演变成 ECMAScript 6；一些不是很成熟的设想，则被视为 JavaScript.next.next，在更远的将来再考虑推出。TC39 委员会的总体考虑是，ES5 与 ES3 基本保持兼容，较大的语法修正和新功能加入，将由 JavaScript.next 完成。当时，JavaScript.next 指的是ES6，第六版发布以后，就指 ES7。TC39 的判断是，ES5 会在2013年的年中成为 JavaScript 开发的主流标准，并在此后五年中一直保持这个位置。</p>
<p>2011年6月，ECMAscript 5.1 版发布，并且成为 ISO 国际标准（ISO/IEC 16262:2011）。</p>
<p>2013年3月，ECMAScript 6 草案冻结，不再添加新功能。新的功能设想将被放到 ECMAScript 7。</p>
<p>2013年12月，ECMAScript 6 草案发布。然后是12个月的讨论期，听取各方反馈。</p>
<p>2015年6月，ECMAScript 6 正式通过，成为国际标准。从2000年算起，这时已经过去了15年。</p>
<p>部署进度<br>各大浏览器的最新版本，对 ES6 的支持可以查看kangax.github.io/es5-compat-table/es6/。随着时间的推移，支持度已经越来越高了，超过90%的 ES6 语法特性都实现了。</p>
<p>Node 是 JavaScript 的服务器运行环境（runtime）。它对 ES6 的支持度更高。除了那些默认打开的功能，还有一些语法功能已经实现了，但是默认没有打开。使用下面的命令，可以查看 Node 已经实现的 ES6 特性。</p>
<p>$ node –v8-options | grep harmony<br>上面命令的输出结果，会因为版本的不同而有所不同。</p>
<p>我写了一个工具 ES-Checker，用来检查各种运行环境对 ES6 的支持情况。访问ruanyf.github.io/es-checker，可以看到您的浏览器支持 ES6 的程度。运行下面的命令，可以查看你正在使用的 Node 环境对 ES6 的支持程度。</p>
<p>$ npm install -g es-checker<br>$ es-checker</p>
<p>=========================================<br>Passes 24 feature Dectations</p>
<h1 id="Your-runtime-supports-57-of-ECMAScript-6"><a href="#Your-runtime-supports-57-of-ECMAScript-6" class="headerlink" title="Your runtime supports 57% of ECMAScript 6"></a>Your runtime supports 57% of ECMAScript 6</h1><p>Babel 转码器<br>Babel 是一个广泛使用的 ES6 转码器，可以将 ES6 代码转为 ES5 代码，从而在现有环境执行。这意味着，你可以用 ES6 的方式编写程序，又不用担心现有环境是否支持。下面是一个例子。</p>
<p>// 转码前<br>input.map(item =&gt; item + 1);</p>
<p>// 转码后<br>input.map(function (item) {<br>  return item + 1;<br>});<br>上面的原始代码用了箭头函数，Babel 将其转为普通函数，就能在不支持箭头函数的 JavaScript 环境执行了。</p>
<p>配置文件.babelrc<br>Babel 的配置文件是.babelrc，存放在项目的根目录下。使用 Babel 的第一步，就是配置这个文件。</p>
<p>该文件用来设置转码规则和插件，基本格式如下。</p>
<p>{<br>  “presets”: [],<br>  “plugins”: []<br>}<br>presets字段设定转码规则，官方提供以下的规则集，你可以根据需要安装。</p>
<h1 id="最新转码规则"><a href="#最新转码规则" class="headerlink" title="最新转码规则"></a>最新转码规则</h1><p>$ npm install –save-dev babel-preset-latest</p>
<h1 id="react-转码规则"><a href="#react-转码规则" class="headerlink" title="react 转码规则"></a>react 转码规则</h1><p>$ npm install –save-dev babel-preset-react</p>
<h1 id="不同阶段语法提案的转码规则（共有4个阶段），选装一个"><a href="#不同阶段语法提案的转码规则（共有4个阶段），选装一个" class="headerlink" title="不同阶段语法提案的转码规则（共有4个阶段），选装一个"></a>不同阶段语法提案的转码规则（共有4个阶段），选装一个</h1><p>$ npm install –save-dev babel-preset-stage-0<br>$ npm install –save-dev babel-preset-stage-1<br>$ npm install –save-dev babel-preset-stage-2<br>$ npm install –save-dev babel-preset-stage-3<br>然后，将这些规则加入.babelrc。</p>
<p>  {<br>    “presets”: [<br>      “latest”,<br>      “react”,<br>      “stage-2”<br>    ],<br>    “plugins”: []<br>  }<br>注意，以下所有 Babel工具和模块的使用，都必须先写好.babelrc。</p>
<p>命令行转码babel-cli<br>Babel提供babel-cli工具，用于命令行转码。</p>
<p>它的安装命令如下。</p>
<p>$ npm install –global babel-cli<br>基本用法如下。</p>
<h1 id="转码结果输出到标准输出"><a href="#转码结果输出到标准输出" class="headerlink" title="转码结果输出到标准输出"></a>转码结果输出到标准输出</h1><p>$ babel example.js</p>
<h1 id="转码结果写入一个文件"><a href="#转码结果写入一个文件" class="headerlink" title="转码结果写入一个文件"></a>转码结果写入一个文件</h1><h1 id="–out-file-或-o-参数指定输出文件"><a href="#–out-file-或-o-参数指定输出文件" class="headerlink" title="–out-file 或 -o 参数指定输出文件"></a>–out-file 或 -o 参数指定输出文件</h1><p>$ babel example.js –out-file compiled.js</p>
<h1 id="或者"><a href="#或者" class="headerlink" title="或者"></a>或者</h1><p>$ babel example.js -o compiled.js</p>
<h1 id="整个目录转码"><a href="#整个目录转码" class="headerlink" title="整个目录转码"></a>整个目录转码</h1><h1 id="–out-dir-或-d-参数指定输出目录"><a href="#–out-dir-或-d-参数指定输出目录" class="headerlink" title="–out-dir 或 -d 参数指定输出目录"></a>–out-dir 或 -d 参数指定输出目录</h1><p>$ babel src –out-dir lib</p>
<h1 id="或者-1"><a href="#或者-1" class="headerlink" title="或者"></a>或者</h1><p>$ babel src -d lib</p>
<h1 id="s-参数生成source-map文件"><a href="#s-参数生成source-map文件" class="headerlink" title="-s 参数生成source map文件"></a>-s 参数生成source map文件</h1><p>$ babel src -d lib -s<br>上面代码是在全局环境下，进行 Babel 转码。这意味着，如果项目要运行，全局环境必须有 Babel，也就是说项目产生了对环境的依赖。另一方面，这样做也无法支持不同项目使用不同版本的 Babel。</p>
<p>一个解决办法是将babel-cli安装在项目之中。</p>
<h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><p>$ npm install –save-dev babel-cli<br>然后，改写package.json。</p>
<p>{<br>  // …<br>  “devDependencies”: {<br>    “babel-cli”: “^6.0.0”<br>  },<br>  “scripts”: {<br>    “build”: “babel src -d lib”<br>  },<br>}<br>转码的时候，就执行下面的命令。</p>
<p>$ npm run build<br>babel-node<br>babel-cli工具自带一个babel-node命令，提供一个支持ES6的REPL环境。它支持Node的REPL环境的所有功能，而且可以直接运行ES6代码。</p>
<p>它不用单独安装，而是随babel-cli一起安装。然后，执行babel-node就进入REPL环境。</p>
<p>$ babel-node</p>
<blockquote>
<p>(x =&gt; x * 2)(1)<br>2<br>babel-node命令可以直接运行ES6脚本。将上面的代码放入脚本文件es6.js，然后直接运行。</p>
</blockquote>
<p>$ babel-node es6.js<br>2<br>babel-node也可以安装在项目中。</p>
<p>$ npm install –save-dev babel-cli<br>然后，改写package.json。</p>
<p>{<br>  “scripts”: {<br>    “script-name”: “babel-node script.js”<br>  }<br>}<br>上面代码中，使用babel-node替代node，这样script.js本身就不用做任何转码处理。</p>
<p>babel-register<br>babel-register模块改写require命令，为它加上一个钩子。此后，每当使用require加载.js、.jsx、.es和.es6后缀名的文件，就会先用Babel进行转码。</p>
<p>$ npm install –save-dev babel-register<br>使用时，必须首先加载babel-register。</p>
<p>require(“babel-register”);<br>require(“./index.js”);<br>然后，就不需要手动对index.js转码了。</p>
<p>需要注意的是，babel-register只会对require命令加载的文件转码，而不会对当前文件转码。另外，由于它是实时转码，所以只适合在开发环境使用。</p>
<p>babel-core<br>如果某些代码需要调用 Babel 的 API 进行转码，就要使用babel-core模块。</p>
<p>安装命令如下。</p>
<p>$ npm install babel-core –save<br>然后，在项目中就可以调用babel-core。</p>
<p>var babel = require(‘babel-core’);</p>
<p>// 字符串转码<br>babel.transform(‘code();’, options);<br>// =&gt; { code, map, ast }</p>
<p>// 文件转码（异步）<br>babel.transformFile(‘filename.js’, options, function(err, result) {<br>  result; // =&gt; { code, map, ast }<br>});</p>
<p>// 文件转码（同步）<br>babel.transformFileSync(‘filename.js’, options);<br>// =&gt; { code, map, ast }</p>
<p>// Babel AST转码<br>babel.transformFromAst(ast, code, options);<br>// =&gt; { code, map, ast }<br>配置对象options，可以参看官方文档<a href="http://babeljs.io/docs/usage/options/。" target="_blank" rel="external">http://babeljs.io/docs/usage/options/。</a></p>
<p>下面是一个例子。</p>
<p>var es6Code = ‘let x = n =&gt; n + 1’;<br>var es5Code = require(‘babel-core’)<br>  .transform(es6Code, {<br>    presets: [‘latest’]<br>  })<br>  .code;<br>// ‘“use strict”;\n\nvar x = function x(n) {\n  return n + 1;\n};’<br>上面代码中，transform方法的第一个参数是一个字符串，表示需要被转换的ES6代码，第二个参数是转换的配置对象。</p>
<p>babel-polyfill<br>Babel 默认只转换新的 JavaScript 句法（syntax），而不转换新的 API，比如Iterator、Generator、Set、Maps、Proxy、Reflect、Symbol、Promise等全局对象，以及一些定义在全局对象上的方法（比如Object.assign）都不会转码。</p>
<p>举例来说，ES6在Array对象上新增了Array.from方法。Babel 就不会转码这个方法。如果想让这个方法运行，必须使用babel-polyfill，为当前环境提供一个垫片。</p>
<p>安装命令如下。</p>
<p>$ npm install –save babel-polyfill<br>然后，在脚本头部，加入如下一行代码。</p>
<p>import ‘babel-polyfill’;<br>// 或者<br>require(‘babel-polyfill’);<br>Babel 默认不转码的 API 非常多，详细清单可以查看babel-plugin-transform-runtime模块的definitions.js文件。</p>
<p>浏览器环境<br>Babel 也可以用于浏览器环境。但是，从 Babel 6.0 开始，不再直接提供浏览器版本，而是要用构建工具构建出来。如果你没有或不想使用构建工具，可以使用babel-standalone模块提供的浏览器版本，将其插入网页。</p>
<p><script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/6.4.4/babel.min.js"></script></p>
<p><script type="text/babel"><br>// Your ES6 code<br></script><br>注意，网页实时将 ES6 代码转为 ES5，对性能会有影响。生产环境需要加载已经转码完成的脚本。</p>
<p>下面是如何将代码打包成浏览器可以使用的脚本，以Babel配合Browserify为例。首先，安装babelify模块。</p>
<p>$ npm install –save-dev babelify babel-preset-latest<br>然后，再用命令行转换 ES6 脚本。</p>
<p>$  browserify script.js -o bundle.js \<br>  -t [ babelify –presets [ latest ] ]<br>上面代码将ES6脚本script.js，转为bundle.js，浏览器直接加载后者就可以了。</p>
<p>在package.json设置下面的代码，就不用每次命令行都输入参数了。</p>
<p>{<br>  “browserify”: {<br>    “transform”: [[“babelify”, { “presets”: [“latest”] }]]<br>  }<br>}<br>在线转换<br>Babel 提供一个REPL在线编译器，可以在线将 ES6 代码转为 ES5 代码。转换后的代码，可以直接作为 ES5 代码插入网页运行。</p>
<p>与其他工具的配合<br>许多工具需要 Babel 进行前置转码，这里举两个例子：ESLint 和 Mocha。</p>
<p>ESLint 用于静态检查代码的语法和风格，安装命令如下。</p>
<p>$ npm install –save-dev eslint babel-eslint<br>然后，在项目根目录下，新建一个配置文件.eslintrc，在其中加入parser字段。</p>
<p>{<br>  “parser”: “babel-eslint”,<br>  “rules”: {<br>    …<br>  }<br>}<br>再在package.json之中，加入相应的scripts脚本。</p>
<p>  {<br>    “name”: “my-module”,<br>    “scripts”: {<br>      “lint”: “eslint my-files.js”<br>    },<br>    “devDependencies”: {<br>      “babel-eslint”: “…”,<br>      “eslint”: “…”<br>    }<br>  }<br>Mocha 则是一个测试框架，如果需要执行使用 ES6 语法的测试脚本，可以修改package.json的scripts.test。</p>
<p>“scripts”: {<br>  “test”: “mocha –ui qunit –compilers js:babel-core/register”<br>}<br>上面命令中，–compilers参数指定脚本的转码器，规定后缀名为js的文件，都需要使用babel-core/register先转码。</p>
<p>Traceur 转码器<br>Google公司的Traceur转码器，也可以将 ES6 代码转为 ES5 代码。</p>
<p>直接插入网页<br>Traceur 允许将 ES6 代码直接插入网页。首先，必须在网页头部加载 Traceur 库文件。</p>
<p><script src="https://google.github.io/traceur-compiler/bin/traceur.js"></script></p>
<p><script src="https://google.github.io/traceur-compiler/bin/BrowserSystem.js"></script></p>
<p><script src="https://google.github.io/traceur-compiler/src/bootstrap.js"></script></p>
<p><script type="module"><br>  import ‘./Greeter.js’;<br></script><br>上面代码中，一共有4个script标签。第一个是加载 Traceur 的库文件，第二个和第三个是将这个库文件用于浏览器环境，第四个则是加载用户脚本，这个脚本里面可以使用ES6代码。</p>
<p>注意，第四个script标签的type属性的值是module，而不是text/javascript。这是 Traceur 编译器识别 ES6 代码的标志，编译器会自动将所有type=module的代码编译为 ES5，然后再交给浏览器执行。</p>
<p>除了引用外部 ES6 脚本，也可以直接在网页中放置 ES6 代码。</p>
<p><script type="module"><br>  class Calc {<br>    constructor() {<br>      console.log(‘Calc constructor’);<br>    }<br>    add(a, b) {<br>      return a + b;<br>    }<br>  }</p>
<p>  var c = new Calc();<br>  console.log(c.add(4,5));<br></script><br>正常情况下，上面代码会在控制台打印出9。</p>
<p>如果想对 Traceur 的行为有精确控制，可以采用下面参数配置的写法。</p>
<p><script><br>  // Create the System object<br>  window.System = new traceur.runtime.BrowserTraceurLoader();<br>  // Set some experimental options<br>  var metadata = {<br>    traceurOptions: {<br>      experimental: true,<br>      properTailCalls: true,<br>      symbols: true,<br>      arrayComprehension: true,<br>      asyncFunctions: true,<br>      asyncGenerators: exponentiation,<br>      forOn: true,<br>      generatorComprehension: true<br>    }<br>  };<br>  // Load your module<br>  System.import(‘./myModule.js’, {metadata: metadata}).catch(function(ex) {<br>    console.error(‘Import failed’, ex.stack || ex);<br>  });<br></script><br>上面代码中，首先生成Traceur的全局对象window.System，然后System.import方法可以用来加载 ES6。加载的时候，需要传入一个配置对象metadata，该对象的traceurOptions属性可以配置支持 ES6 功能。如果设为experimental: true，就表示除了 ES6 以外，还支持一些实验性的新功能。</p>
<p>在线转换<br>Traceur也提供一个在线编译器，可以在线将 ES6 代码转为 ES5 代码。转换后的代码，可以直接作为 ES5 代码插入网页运行。</p>
<p>上面的例子转为 ES5 代码运行，就是下面这个样子。</p>
<p><script src="https://google.github.io/traceur-compiler/bin/traceur.js"></script></p>
<p><script src="https://google.github.io/traceur-compiler/bin/BrowserSystem.js"></script></p>
<p><script src="https://google.github.io/traceur-compiler/src/bootstrap.js"></script></p>
<p><script><br>$traceurRuntime.ModuleStore.getAnonymousModule(function() {<br>  “use strict”;</p>
<p>  var Calc = function Calc() {<br>    console.log(‘Calc constructor’);<br>  };</p>
<p>  ($traceurRuntime.createClass)(Calc, {add: function(a, b) {<br>    return a + b;<br>  }}, {});</p>
<p>  var c = new Calc();<br>  console.log(c.add(4, 5));<br>  return {};<br>});<br></script><br>命令行转换<br>作为命令行工具使用时，Traceur 是一个 Node 的模块，首先需要用 Npm 安装。</p>
<p>$ npm install -g traceur<br>安装成功后，就可以在命令行下使用 Traceur 了。</p>
<p>Traceur 直接运行 ES6 脚本文件，会在标准输出显示运行结果，以前面的calc.js为例。</p>
<p>$ traceur calc.js<br>Calc constructor<br>9<br>如果要将 ES6 脚本转为 ES5 保存，要采用下面的写法。</p>
<p>$ traceur –script calc.es6.js –out calc.es5.js<br>上面代码的–script选项表示指定输入文件，–out选项表示指定输出文件。</p>
<p>为了防止有些特性编译不成功，最好加上–experimental选项。</p>
<p>$ traceur –script calc.es6.js –out calc.es5.js –experimental<br>命令行下转换生成的文件，就可以直接放到浏览器中运行。</p>
<p>Node 环境的用法<br>Traceur 的 Node用法如下（假定已安装traceur模块）。</p>
<p>var traceur = require(‘traceur’);<br>var fs = require(‘fs’);</p>
<p>// 将ES6脚本转为字符串<br>var contents = fs.readFileSync(‘es6-file.js’).toString();</p>
<p>var result = traceur.compile(contents, {<br>  filename: ‘es6-file.js’,<br>  sourceMap: true,<br>  // 其他设置<br>  modules: ‘commonjs’<br>});</p>
<p>if (result.error)<br>  throw result.error;</p>
<p>// result对象的js属性就是转换后的ES5代码<br>fs.writeFileSync(‘out.js’, result.js);<br>// sourceMap属性对应map文件<br>fs.writeFileSync(‘out.js.map’, result.sourceMap);</p>

      
    </div>
    
  </div>
  
    
    <div class="copyright">
        <p><span>本文标题:</span><a href="/2017/04/10/test1/">hello-world   //在此处添加你的标题。</a></p>
        <p><span>文章作者:</span><a href="/" title="回到主页">alingfeng</a></p>
        <p><span>发布时间:</span>2017-04-10, 22:49:22</p>
        <p><span>最后更新:</span>2017-04-10, 22:49:06</p>
        <p>
            <span>原始链接:</span><a class="post-url" href="/2017/04/10/test1/" title="hello-world   //在此处添加你的标题。">http://yoursite.com/2017/04/10/test1/</a>
            <span class="copy-path" data-clipboard-text="原文: http://yoursite.com/2017/04/10/test1/　　作者: alingfeng" title="点击复制文章链接"><i class="fa fa-clipboard"></i></span>
            <script> var clipboard = new Clipboard('.copy-path'); </script>
        </p>
        <p>
            <span>许可协议:</span><i class="fa fa-creative-commons"></i> <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" title="CC BY-NC-SA 4.0 International" target = "_blank">"署名-非商用-相同方式共享 4.0"</a> 转载请保留原文链接及作者。
        </p>
    </div>



    <nav id="article-nav">
        
            <div id="article-nav-newer" class="article-nav-title">
                <a href="/2017/04/09/hello-world/">
                    hello-world   //在此处添加你的标题。
                </a>
            </div>
        
        
    </nav>

  
</article>

    <div id="toc" class="toc-article">
        <strong class="toc-title">文章目录</strong>
        
            <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Your-runtime-supports-57-of-ECMAScript-6"><span class="toc-number">1.</span> <span class="toc-text">Your runtime supports 57% of ECMAScript 6</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#最新转码规则"><span class="toc-number">2.</span> <span class="toc-text">最新转码规则</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#react-转码规则"><span class="toc-number">3.</span> <span class="toc-text">react 转码规则</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#不同阶段语法提案的转码规则（共有4个阶段），选装一个"><span class="toc-number">4.</span> <span class="toc-text">不同阶段语法提案的转码规则（共有4个阶段），选装一个</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#转码结果输出到标准输出"><span class="toc-number">5.</span> <span class="toc-text">转码结果输出到标准输出</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#转码结果写入一个文件"><span class="toc-number">6.</span> <span class="toc-text">转码结果写入一个文件</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#–out-file-或-o-参数指定输出文件"><span class="toc-number">7.</span> <span class="toc-text">–out-file 或 -o 参数指定输出文件</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#或者"><span class="toc-number">8.</span> <span class="toc-text">或者</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#整个目录转码"><span class="toc-number">9.</span> <span class="toc-text">整个目录转码</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#–out-dir-或-d-参数指定输出目录"><span class="toc-number">10.</span> <span class="toc-text">–out-dir 或 -d 参数指定输出目录</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#或者-1"><span class="toc-number">11.</span> <span class="toc-text">或者</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#s-参数生成source-map文件"><span class="toc-number">12.</span> <span class="toc-text">-s 参数生成source map文件</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#安装"><span class="toc-number">13.</span> <span class="toc-text">安装</span></a></li></ol>
        
    </div>
    <style>
        .left-col .switch-btn,
        .left-col .switch-area {
            display: none;
        }
        .toc-level-3 i,
        .toc-level-3 ol {
            display: none !important;
        }
    </style>

    <input type="button" id="tocButton" value="隐藏目录"  title="点击按钮隐藏或者显示文章目录">

    <script>
        yiliaConfig.toc = ["隐藏目录", "显示目录", !!"false"];
    </script>



    
<div class="share">
    
        <div class="bdsharebuttonbox">
            <a href="#" class="fa fa-twitter bds_twi" data-cmd="twi" title="分享到推特"></a>
            <a href="#" class="fa fa-weibo bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a>
            <a href="#" class="fa fa-qq bds_sqq" data-cmd="sqq" title="分享给 QQ 好友"></a>
            <a href="#" class="fa fa-files-o bds_copy" data-cmd="copy" title="复制网址"></a>
            <a href="#" class="fa fa fa-envelope-o bds_mail" data-cmd="mail" title="通过邮件分享"></a>
            <a href="#" class="fa fa-weixin bds_weixin" data-cmd="weixin" title="生成文章二维码"></a>
            <a href="#" class="fa fa-share-alt bds_more" data-cmd="more"></i></a>
        </div>
        <script>
            window._bd_share_config={
                "common":{"bdSnsKey":{},"bdText":"hello-world   //在此处添加你的标题。　| alingfeng　","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"0","bdSize":"24"},"share":{}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
        </script>
    

    
</div>







    




    <div class="scroll" id="post-nav-button">
        
            <a href="/2017/04/09/hello-world/" title="上一篇: hello-world   //在此处添加你的标题。">
                <i class="fa fa-angle-left"></i>
            </a>
        

        <a title="文章列表"><i class="fa fa-bars"></i><i class="fa fa-times"></i></a>

        
            <a href="/" title="回到主页"><i class="fa fa-home"></i></a>
        
    </div>

    <ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2017/04/10/test1/">hello-world   //在此处添加你的标题。</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/04/09/hello-world/">hello-world   //在此处添加你的标题。</a></li></ul>




    <script>
        
    </script>
</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                <i class="fa fa-copyright"></i> 
                2016-2017 alingfeng
            </div>
            <div class="footer-right">
                <a href="http://hexo.io/" target="_blank" title="快速、简洁且高效的博客框架">Hexo</a>  Theme <a href="https://github.com/MOxFIVE/hexo-theme-yelee" target="_blank" title="简而不减 Hexo 双栏博客主题  v3.5">Yelee</a> by MOxFIVE <i class="fa fa-heart animated infinite pulse"></i>
            </div>
        </div>
        
            <div class="visit">
                
                    <span id="busuanzi_container_site_pv" style='display:none'>
                        <span id="site-visit" title="本站到访数"><i class="fa fa-user" aria-hidden="true"></i><span id="busuanzi_value_site_uv"></span>
                        </span>
                    </span>
                
                
                    <span>| </span>
                
                
                    <span id="busuanzi_container_page_pv" style='display:none'>
                        <span id="page-visit"  title="本页阅读量"><i class="fa fa-eye animated infinite pulse" aria-hidden="true"></i><span id="busuanzi_value_page_pv"></span>
                        </span>
                    </span>
                
            </div>
        
    </div>
</footer>
    </div>
    
<script data-main="/js/main.js" src="//cdn.bootcss.com/require.js/2.2.0/require.min.js"></script>

    <script>
        $(document).ready(function() {
            var iPad = window.navigator.userAgent.indexOf('iPad');
            if (iPad > -1 || $(".left-col").css("display") === "none") {
                var bgColorList = ["#9db3f4", "#414141", "#e5a859", "#f5dfc6", "#c084a0", "#847e72", "#cd8390", "#996731"];
                var bgColor = Math.ceil(Math.random() * (bgColorList.length - 1));
                $("body").css({"background-color": bgColorList[bgColor], "background-size": "cover"});
            }
            else {
                var backgroundnum = 5;
                var backgroundimg = "url(/background/bg-x.jpg)".replace(/x/gi, Math.ceil(Math.random() * backgroundnum));
                $("body").css({"background": backgroundimg, "background-attachment": "fixed", "background-size": "cover"});
            }
        })
    </script>





<div class="scroll" id="scroll">
    <a href="#" title="返回顶部"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments" onclick="load$hide();" title="查看评论"><i class="fa fa-comments-o"></i></a>
    <a href="#footer" title="转到底部"><i class="fa fa-arrow-down"></i></a>
</div>
<script>
    // Open in New Window
    
        var oOpenInNew = {
            
            
            
            
            
            
             archives: ".archive-article-title", 
             miniArchives: "a.post-list-link", 
            
             friends: "#js-friends a", 
             socail: ".social a" 
        }
        for (var x in oOpenInNew) {
            $(oOpenInNew[x]).attr("target", "_blank");
        }
    
</script>

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
  </div>
</body>
</html>